<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>TimeLeft — ETA Calculator</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#ffffff">
    <link rel="icon" href="./favicon.ico">
    <link rel="stylesheet" href="styles.css">
    <script type="module" src="app.js"></script>
</head>

<body>

<div class="app">

    <!-- ===============================
         HEADER
    ================================ -->
    <header class="header">
        <h1 class="title">TimeLeft</h1>
        <div class="subtitle">ETA Calculator</div>
    </header>

    <!-- ===============================
         BLOCK PROCESS CONTROL
         "Start process, reset process"
    ================================ -->
    <section class="process-control">
        <div class="row controls">
            <button id="startProcessButton" class="control primary block-setup">
                &#9654;
            </button>

            <button id="resetProcessButton" class="control danger block-running">
                &#8634;
            </button>
        </div>
    </section>

    <main class="app-main">

        <!-- ===============================
            BLOCK 1 — SETUP / START
            "What is this process?"
        ================================ -->
        <section class="section block-setup" id="setupBlock">
            <!-- Total steps -->
            <div class="metric-row">
                <label>Total work</label>

                <!-- Mobile value -->
                <div id="totalStepsValue" class="metric-value mono value-primary">—</div>

                <!-- Desktop input -->
                <input
                    id="totalStepsInput"
                    class="steps-value"
                    type="number"
                    min="1"
                    max="999999"
                >

                <!-- Total duration (derived) -->
                <div id="totalDuration" class="mono metric-duration value-primary">
                    ⏱ —
                </div>
            </div>

            <!-- Total steps controls -->
            <div class="row controls">
                <div class="controls-group">
                    <button id="addTotalStepsButton" class="control">+</button>
                    <button id="subTotalStepsButton" class="control">-</button>
                    <span class="by">by</span>
                    <select id="incTotalSteps" class="control">
                        <option>1</option>
                        <option>5</option>
                        <option>10</option>
                        <option>50</option>
                        <option>100</option>
                        <option>500</option>
                        <option>1000</option>
                        <option>5000</option>
                        <option>10000</option>
                        <option>50000</option>
                        <option>100000</option>
                    </select>
                </div>

                <button id="resetTotalStepsButton" class="control reset">⟲</button>
            </div>

            <!-- Started earlier? -->
            <div class="started-earlier">
                <label for="startDateInput">Started earlier?</label>
                <input
                    type="datetime-local"
                    id="startDateInput"
                />
            </div>
        </section>

        <!-- ===============================
            BLOCK 2 — PROGRESS
            "How is it going?"
        ================================ -->
        <section class="section block-running" id="progressBlock">

            <!-- Completed steps -->
            <div class="metric-row">
                <label>Progress</label>

                <!-- Mobile value -->
                <div id="completedStepsValue" class="metric-value mono value-primary">—</div>

                <!-- Desktop input -->
                <input
                    id="completedStepsInput"
                    class="steps-value"
                    type="number"
                    min="0"
                    max="999999"
                >

                <!-- Elapsed duration -->
                <div id="elapsedDuration" class="mono metric-duration value-primary">
                    ⏱ —
                </div>
            </div>

            <!-- Completed controls -->
            <div class="row controls">
                <div class="controls-group">
                    <button id="addCompletedStepsButton" class="control">+</button>
                    <button id="subCompletedStepsButton" class="control">-</button>
                    <span class="by">by</span>
                    <select id="incCompletedSteps" class="control">
                        <option>1</option>
                        <option>5</option>
                        <option>10</option>
                        <option>50</option>
                        <option>100</option>
                        <option>500</option>
                        <option>1000</option>
                        <option>5000</option>
                        <option>10000</option>
                        <option>50000</option>
                        <option>100000</option>
                    </select>
                </div>

                <button id="resetCompletedStepsButton" class="control reset">⟲</button>
            </div>

            <!-- Last measurement -->
            <div class="row">
                <label>Last update</label>

                <div id="lastMeasurementDate" class="datetime value-primary">
                    <div class="time">—</div>
                    <div class="date">—</div>
                </div>

                <button id="measureNowButton" class="control">Now</button>
            </div>

            <!-- Remaining -->
            <div class="metric-row">
                <label>Remaining</label>

                <div id="remainingSteps" class="metric-value mono value-primary">
                    <span class="value">—</span>
                </div>

                <div id="remainingDuration" class="mono metric-duration value-primary">
                    ⏱ —
                </div>
            </div>

        </section>

        <!-- ===============================
            BLOCK 3 — RESULT
            "When will it finish?"
        ================================ -->
        <section class="highlight block-running">

            <div class="highlight-label">Estimated end</div>

            <div id="estimatedEndDate" class="datetime estimated-end">
                <div class="time">—</div>
                <div class="date">—</div>
            </div>

        </section>

    </main>

    <!-- ===============================
         FOOTER
    ================================ -->
    <footer class="footer">
        Version <span id="appVersion">0.01</span>
    </footer>

</div>

<div class="feedback-wrapper">
    <div id="feedback" class="feedback"></div>
</div>

<script>
if ("serviceWorker" in navigator) {
    navigator.serviceWorker.register("./service-worker.js");
}
</script>

</body>
</html>
